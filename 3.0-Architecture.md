### 1. Preparing

```php
/**
 * @param $headers \Iterator|array|HttpMessageInterface|string 
 */
$detect = new MobileDetect($headers);
```

### 2. Detecting

`ResultInterface` - is the result from detection but with extra data from `Repositories`
  * `$headers`
  * `$userAgent`
  * `DeviceInterface`
  * `BrowserInterface`
  * `OperatingSystemInterface`


```php
$result = new ResultInterface;

$detectDevice = new DetectDeviceService($result);
$detectDevice->detect();
        
$detectBrowser = new DetectBrowserService($result);
$detectBrowser->detect();

$detectOs = new DetectOperatingSystemService($result);
$detectOs->detect();
```

### 3. Returning the result

```php
Device::create(ResultInterface $result);
```


**Presentation**

```
MobileDetect($request)
  $input = Request($userAgent, $httpHeaders);
  $this->detect();
     return FactoryResponse::create(Device $device);
```

**Domain**

```
DetectionService($input)
   $device = new Device();
   $device->setHardware(HardwareItem);
   $device->setBrowser(BrowserItem);
   $device->setOs(OsItem);

      return $device;
```

```
   HardwareService($input)
      search in HardwareCollection()
        return HardwareItem
   BrowserService($input, $context)
      search in BrowserCollection()
        return BrowserItem
   OsService($input, $context)
      search in OsCollection()
        return OsItem
```

**Persistence**

```
  * HardwareRepo(.json)
  * BrowserRepo(.json)
  * OsRepo(.json)
```